

<CaseFilter InputModel="@InputFilter" Culture="@Culture" OnValidSubmit="ShowReport"></CaseFilter>


@if (showReport)
{
    @if(ReportType == "Alias")
    {
        <CaseGridAliasOnly InputFilter="@SubmitedFilter" ContactId="CurrentContactId" Culture="@Culture" OnCaseDetailsClicked="@((cId) => OnCaseDetailsClicked.InvokeAsync(cId))"></CaseGridAliasOnly>    
    }
    else
    {
        <CaseGrid InputFilter="@SubmitedFilter" ContactId="CurrentContactId" Culture="@Culture" OnCaseDetailsClicked="@((cId) => OnCaseDetailsClicked.InvokeAsync(cId))"></CaseGrid>   
    }
}



@code {

    [Inject] private CommonLocalizationService Localizer { get; set; }

    [CascadingParameter(Name = "CurrentContactId")] protected int CurrentContactId { get; set; }
    [Parameter] public CaseFilterModel InputFilter { get; set; }
    [Parameter] public string Culture  { get; set; }
    [Parameter] public bool ExecOnInit { get; set; }
    [Parameter] public string ReportType { get; set; }
    [Parameter] public EventCallback<int> OnCaseDetailsClicked { get; set; }

    protected CaseFilterModel SubmitedFilter { get; set; }
    protected bool showReport { get; set; }



    protected override void OnInitialized()
    {
        showReport = false;
        if (ExecOnInit)
        {
            ShowReport(InputFilter);
        }   
    }

    protected void  ShowReport(CaseFilterModel filter)
    {
        showReport = true;
        SubmitedFilter = ObjHelper.Clone<CaseFilterModel>(filter);       

    }

    
}
